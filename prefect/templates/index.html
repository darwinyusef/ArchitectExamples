<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Cotizaci√≥n L√°ser</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üî∑ Sistema de Cotizaci√≥n de Corte L√°ser</h1>
            <p class="subtitle">C√°lculo de costos con modelo de Machine Learning (ONNX)</p>
            <nav class="header-nav">
                <a href="/" class="nav-link active">üè† Cotizaciones</a>
                <a href="/docs" class="nav-link" target="_blank">üìö API Docs</a>
            </nav>
        </header>

        <!-- Estad√≠sticas del Servicio -->
        <section class="stats-section">
            <h2>üìä Estad√≠sticas del Servicio</h2>
            <div class="stats-grid" id="statsGrid">
                <div class="stat-card">
                    <div class="stat-value" id="totalCotizaciones">-</div>
                    <div class="stat-label">Total Cotizaciones</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="cotizacionesExitosas">-</div>
                    <div class="stat-label">Exitosas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="errores">-</div>
                    <div class="stat-label">Errores</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="uptime">-</div>
                    <div class="stat-label">Uptime (min)</div>
                </div>
            </div>
            <button onclick="cargarEstadisticas()" class="btn btn-secondary">üîÑ Actualizar</button>
        </section>

        <!-- Productos Predefinidos -->
        <section class="products-section">
            <h2>üì¶ Productos Predefinidos</h2>
            <div class="products-grid" id="productsGrid">
                <!-- Se carga din√°micamente -->
            </div>
        </section>

        <!-- Formulario de Cotizaci√≥n Personalizada -->
        <section class="form-section">
            <h2>‚úèÔ∏è Cotizaci√≥n Personalizada</h2>
            <form id="cotizacionForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="tiempoSeg">Tiempo de Corte (segundos)</label>
                        <input type="number" id="tiempoSeg" name="tiempoSeg"
                               min="0.01" step="0.01" required
                               placeholder="Ej: 360">
                        <small>Tiempo que tarda el l√°ser en cortar la pieza</small>
                    </div>
                    <div class="form-group">
                        <label for="materialCm2">√Årea de Material (cm¬≤)</label>
                        <input type="number" id="materialCm2" name="materialCm2"
                               min="0.01" step="0.01" required
                               placeholder="Ej: 24">
                        <small>√Årea total del material a cortar</small>
                    </div>
                    <div class="form-group">
                        <label for="energiaKwh">Energ√≠a Consumida (kWh)</label>
                        <input type="number" id="energiaKwh" name="energiaKwh"
                               min="0.001" step="0.001" required
                               placeholder="Ej: 0.025">
                        <small>Energ√≠a el√©ctrica consumida</small>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">üí∞ Calcular Cotizaci√≥n</button>
            </form>
        </section>

        <!-- Resultado de Cotizaci√≥n -->
        <section class="result-section" id="resultSection" style="display: none;">
            <h2>üíµ Resultado de la Cotizaci√≥n</h2>
            <div class="result-card">
                <div class="result-header">
                    <span class="result-id" id="resultId">-</span>
                    <span class="result-status" id="resultStatus">‚úì Calculado</span>
                </div>
                <div class="result-body">
                    <div class="result-item">
                        <span class="result-label">Par√°metros:</span>
                        <span class="result-value" id="resultParams">-</span>
                    </div>
                    <div class="result-item highlight">
                        <span class="result-label">Costo de Producci√≥n:</span>
                        <span class="result-value" id="resultCosto">$0.00 COP</span>
                    </div>
                    <div class="result-item highlight">
                        <span class="result-label">Precio al Detal:</span>
                        <span class="result-value price" id="resultPrecio">$0.00 COP</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Margen Aplicado:</span>
                        <span class="result-value" id="resultMargen">30%</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Timestamp:</span>
                        <span class="result-value" id="resultTimestamp">-</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Historial de Cotizaciones -->
        <section class="history-section">
            <h2>üìú Historial de Cotizaciones</h2>
            <div class="history-controls">
                <button onclick="limpiarHistorial()" class="btn btn-secondary">üóëÔ∏è Limpiar</button>
            </div>
            <div class="history-list" id="historyList">
                <p class="empty-message">No hay cotizaciones en el historial</p>
            </div>
        </section>

        <footer>
            <p>Sistema desarrollado con FastAPI + ONNX Runtime |
               <a href="/docs" target="_blank">üìö Documentaci√≥n API</a>
            </p>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p>Procesando...</p>
    </div>

    <script src="/static/js/main.js"></script>
</body>
</html>